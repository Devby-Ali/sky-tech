import React, { useContext, useEffect, useState } from "react";
import AuthContext from "../../../context/authContext";

export default function Index() {
  const [ticketsCount, setTicketsCount] = useState(null);

  const authContext = useContext(AuthContext);

  const [userCourses, setUserCourses] = useState([]);

  useEffect(() => {
    fetch(`http://localhost:4000/v1/tickets/user`, {
      headers: {
        Authorization: `Bearer ${
          JSON.parse(localStorage.getItem("user")).token
        }`,
      },
    })
      .then((res) => {
        return res.json();
      })
      .then((data) => {
        setTicketsCount(data.length);
        setUserCourses(authContext.userInfos.courses);
      });
  }, [authContext]);

  console.log(authContext);

  return (
    <section className="">
      <div className="flex items-center justify-between gap-y-10 gap-x-8 flex-wrap font-EstedadMedium bg-white dark:bg-slate-800 px-8 py-10 sm:px-12 mt-16 md:mt-20 rounded-xl">
        <div className="flex items-center gap-x-6 w-96 col-span-3">
          <div className="w-24">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 48 48"
            >
              <path
                fill="#22C55E"
                d="M42.035 8.915h-1.851a.48.48 0 1 0 0 .96h1.85c.877 0 1.59.656 1.59 1.463v23.255c0 .806-.714 1.462-1.59 1.462H5.965c-.877 0-1.589-.655-1.589-1.462V11.338c0-.806.713-1.463 1.59-1.463h2.357a.48.48 0 0 0 0-.96H5.965c-1.405 0-2.549 1.087-2.549 2.423v23.255c0 1.336 1.144 2.422 2.55 2.422h36.068c1.406 0 2.55-1.086 2.55-2.422V11.338c0-1.336-1.144-2.423-2.55-2.423M33.262 41.45H29.79v-2.03a.48.48 0 0 0-.96 0v2.51c0 .265.216.48.48.48h3.952c.269 0 .487.219.487.488v.612a.487.487 0 0 1-.487.487H14.65a.487.487 0 0 1-.488-.487v-.612c0-.269.218-.488.487-.488h3.952a.48.48 0 0 0 .48-.48v-2.51a.48.48 0 1 0-.96 0v2.03h-3.473a1.45 1.45 0 0 0-1.446 1.448v.612a1.45 1.45 0 0 0 1.446 1.447h18.612a1.45 1.45 0 0 0 1.448-1.447v-.612a1.45 1.45 0 0 0-1.447-1.448"
              ></path>
              <path
                fill="#22C55E"
                d="M13.897 3.789a.84.84 0 0 0-.524.775v16.528a.825.825 0 0 0 .999.81c1.17-.254 5.33-.907 9.632 1.24a.82.82 0 0 0 .732 0c4.31-2.15 8.508-1.49 9.694-1.24a.825.825 0 0 0 .996-.81V4.564a.84.84 0 0 0-.525-.776c-5.066-2.012-9.499.613-10.528 1.302-1.022-.69-5.414-3.313-10.476-1.301m20.57.86V20.93c-1.443-.285-5.71-.842-10.097 1.323-3.179-1.569-6.903-1.944-10.037-1.325V4.648c4.718-1.826 8.798.747 9.57 1.286a.82.82 0 0 0 .933.003c.783-.54 4.907-3.116 9.63-1.288"
              ></path>
              <path
                fill="#22C55E"
                d="M37.604 5.769h-.894a.48.48 0 1 0 0 .96h.413V23.89a.234.234 0 0 1-.234.234H11.908a.234.234 0 0 1-.234-.234V6.963c0-.128.105-.233.234-.233h.378a.48.48 0 1 0 0-.96h-.377a1.196 1.196 0 0 0-1.195 1.193v16.928c0 .658.536 1.194 1.194 1.194H36.89a1.196 1.196 0 0 0 1.194-1.194V6.249a.48.48 0 0 0-.48-.48"
              ></path>
              <path
                fill="#22C55E"
                d="M23.601 7.38v12.937a.48.48 0 0 0 .96 0V7.38a.48.48 0 0 0-.96 0m4.266 2c.543-.23 2.16-.761 3.116-.464a.48.48 0 0 0 .283-.918c-1.48-.458-3.68.458-3.772.497-.578.243-.22 1.134.373.885m3.4 1.744c-1.482-.46-3.68.457-3.773.496-.58.245-.217 1.134.372.885.544-.229 2.163-.758 3.117-.464a.48.48 0 0 0 .283-.917m-4.416 5.769c.024-.013 2.512-1.233 5.622-.988a.495.495 0 0 0 .515-.441.48.48 0 0 0-.442-.516c-3.379-.259-6.012 1.03-6.123 1.085a.48.48 0 0 0 .428.86m-8.591-6.416c.953-.293 2.573.235 3.117.464.592.25.951-.64.373-.885-.093-.039-2.292-.953-3.773-.496a.48.48 0 0 0 .283.917m4.04 3.993c-.111-.055-2.746-1.346-6.124-1.086a.48.48 0 0 0-.442.515c.02.265.26.457.515.442 3.104-.243 5.597.975 5.622.988a.48.48 0 0 0 .428-.86m18.707 16.338a.48.48 0 0 0-.48-.48H7.346a.48.48 0 0 0 0 .96h33.18a.48.48 0 0 0 .48-.48M21.48 33.061a.48.48 0 0 0 0 .96h4.953a.48.48 0 1 0 0-.96z"
              ></path>
            </svg>
          </div>
          <div className="flex flex-col gap-y-5">
            <span className="text-2xl sm:text-[1.6rem] text-gray-700 dark:text-gray-400">
              دوره های در حال یادگیری
            </span>
            <span className="text-2xl sm:text-[1.6rem] text-slate-900 dark:text-white">
              {authContext.userInfos.courses ? userCourses.length : 0}
            </span>
          </div>
        </div>

        <div className="flex items-center gap-x-6 w-96 col-span-3">
          <div className="w-24">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 48 48"
            >
              <g clipPath="url(#clip0_5149_5552)">
                <mask
                  id="mask0_5149_5552"
                  width="48"
                  height="48"
                  x="0"
                  y="0"
                  maskUnits="userSpaceOnUse"
                  style={{ maskType: "luminance" }}
                >
                  <path fill="#fff" d="M0 0h48v48H0z"></path>
                </mask>
                <g
                  stroke="#FBBF24"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  strokeMiterlimit="10"
                  mask="url(#mask0_5149_5552)"
                >
                  <path d="M17.278 37.05v-3.556c0-1.249 1.504-2.346 3.325-2.968m6.59-.067c1.908.609 3.53 1.738 3.53 3.035v3.556M10.233 46.532h27.531v-5.485H10.233zM.703 38.607v-4.74c0-1.306.973-2.398 2.23-2.584m7.3 8.182v7.067H.703V41.79M47.297 38.607v-4.74a2.62 2.62 0 0 0-2.182-2.576m-7.35 8.174v7.067h9.532V41.79"></path>
                  <path d="M8.06 31.256c.597.006 1.187.28 1.575.792l3.776 5.002h4.842a2 2 0 0 1 0 3.996H12.42a2 2 0 0 1-1.592-.794l-3.117-4.127M40.047 31.256a2 2 0 0 0-1.685.792l-3.776 5.002h-4.84a1.998 1.998 0 1 0 0 3.997h5.831a2 2 0 0 0 1.595-.795l3.114-4.127M8.04 16.465h12.045a3.57 3.57 0 0 0 3.56-3.561V5.027a3.57 3.57 0 0 0-3.56-3.558H4.65a3.57 3.57 0 0 0-3.561 3.558v7.877a3.57 3.57 0 0 0 3.56 3.561v3.391z"></path>
                  <path d="M28.766 19.17H32.9l3.39 3.391v-3.39a2.69 2.69 0 0 0 2.682-2.685V9.715a2.69 2.69 0 0 0-2.682-2.682H23.645m-4.879 9.432a2.69 2.69 0 0 0 2.684 2.705h4.133M5.858 8.965h13.017m-13.017 3.7h6.509M5.858 5.266h13.017M27.666 28.384a3.807 3.807 0 0 1-3.795 3.795 3.807 3.807 0 0 1-3.795-3.795v-4.066a2.13 2.13 0 0 1 2.126-2.123h5.464zM1.673 28.384a3.807 3.807 0 0 0 3.795 3.795 3.807 3.807 0 0 0 3.795-3.795v-4.066a2.13 2.13 0 0 0-2.123-2.123H3.797a2.13 2.13 0 0 0-2.124 2.123zM46.324 28.384a3.805 3.805 0 0 1-3.792 3.795 3.806 3.806 0 0 1-3.795-3.795v-4.066c0-1.17.954-2.123 2.123-2.123h3.34c1.17 0 2.124.954 2.124 2.123z"></path>
                  <path d="M1.673 28.517c3.641 1.119 4.545-1.178 4.65-3.277 0 0 1.26 1.177 2.94.556M46.324 28.517c-3.64 1.119-4.544-1.178-4.648-3.277 0 0-1.262 1.177-2.94.556M20.076 25.543h7.59"></path>
                </g>
              </g>
              <defs>
                <clipPath id="clip0_5149_5552">
                  <rect width="48" height="48" fill="#fff" rx="4"></rect>
                </clipPath>
              </defs>
            </svg>
          </div>
          <div className="flex flex-col gap-y-5">
            <span className="text-2xl sm:text-[1.6rem] text-gray-700 dark:text-gray-400">
              مجموع تیکت های من
            </span>
            <span className="text-2xl sm:text-[1.6rem] text-slate-900 dark:text-white">
              {ticketsCount}
            </span>
          </div>
        </div>

        <div className="flex items-center gap-x-6 w-96 col-span-3">
          <div className="w-24">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 48 48"
            >
              <path
                stroke="#EF4444"
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeMiterlimit="10"
                d="M21.31 29.836h-9.091c-.8 0-1.528.291-2.037.873l-1.818 1.818c-.873.873-2.327.291-2.327-.945 0-.946-.727-1.673-1.673-1.673-1.818 0-3.2-1.454-3.2-3.273v-12.29c0-1.819 1.455-3.273 3.2-3.273h19.127c1.819 0 3.2 1.454 3.2 3.272v9.528"
              ></path>
              <path
                stroke="#EF4444"
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeMiterlimit="10"
                d="M43.637 23.873H24.582a3.26 3.26 0 0 0-3.272 3.272v12.219a3.26 3.26 0 0 0 3.272 3.272h11.273c.8 0 1.527.291 2.036.873l1.819 1.818c.872.873 2.327.218 2.327-.945 0-.946.727-1.673 1.673-1.673a3.26 3.26 0 0 0 3.272-3.273v-12.29c-.072-1.819-1.527-3.273-3.345-3.273"
              ></path>
              <path
                stroke="#EF4444"
                strokeMiterlimit="10"
                d="M36.219 12.891a1.382 1.382 0 1 0 0-2.763 1.382 1.382 0 0 0 0 2.763Z"
              ></path>
              <path
                stroke="#EF4444"
                strokeMiterlimit="10"
                d="M38.91 12.891a1.382 1.382 0 1 0 0-2.764 1.382 1.382 0 0 0 0 2.764ZM37.528 11.51v7.781m1.454.291v.364a1.381 1.381 0 1 1-2.763 0v-.364"
              ></path>
              <path
                fill="#EF4444"
                d="M45.455 11.291h.364zm-16.145 0h.363zm16.145 0h.364zm-16.145 0h.363z"
              ></path>
              <path
                stroke="#EF4444"
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeMiterlimit="10"
                d="M45.455 11.291h.364m-16.51 0h.364M37.528 3v.364"
              ></path>
              <path
                fill="#EF4444"
                d="m43.128 16.818.29.291zM31.709 5.4l.291.29zm11.419 11.418.29.291zM31.709 5.4l.291.29zM32 16.818l-.29.291zM43.42 5.4l-.291.29zM32 16.818l-.29.291zM43.42 5.4l-.291.29z"
              ></path>
              <path
                stroke="#EF4444"
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeMiterlimit="10"
                d="m43.128 16.818.29.291M31.71 5.399l.29.292m0 11.127-.29.291m11.709-11.71-.291.292"
              ></path>
              <path
                stroke="#EF4444"
                strokeMiterlimit="10"
                d="M42.837 9.91a5.34 5.34 0 0 1-1.673 5.163c-.727.654-1.163 1.6-1.163 2.545v1.164c0 .436-.364.8-.8.8h-3.128a.807.807 0 0 1-.8-.8v-.873c0-1.164-.509-2.182-1.309-2.982a5.27 5.27 0 0 1-1.672-3.854c0-3.418 3.127-6.11 6.69-5.237 1.891.364 3.419 2.037 3.855 4.073Z"
              ></path>
              <path
                stroke="#EF4444"
                strokeMiterlimit="10"
                d="M42.837 9.91a5.34 5.34 0 0 1-1.673 5.163c-.727.654-1.163 1.6-1.163 2.545v1.164c0 .436-.364.8-.8.8h-3.128a.807.807 0 0 1-.8-.8v-.873c0-1.164-.509-2.182-1.309-2.982a5.27 5.27 0 0 1-1.672-3.854c0-3.418 3.127-6.11 6.69-5.237 1.891.364 3.419 2.037 3.855 4.073Z"
              ></path>
              <path
                fill="#EF4444"
                d="m15.637 24.89-1.164-1.381c-.146 0-.364.073-.655.073-.727 0-1.454-.146-2.036-.51-.582-.363-1.018-.8-1.309-1.381-.291-.582-.51-1.237-.51-2.037 0-.727.146-1.454.51-2.036.29-.582.727-1.018 1.309-1.382s1.236-.509 2.036-.509 1.455.146 1.964.51c.582.363 1.018.8 1.31 1.381.29.582.508 1.236.508 2.036 0 .873-.218 1.6-.582 2.255-.363.654-.945 1.09-1.672 1.382l.945 1.09c.073.073.146.219.146.291 0 .146-.073.219-.146.291 0 .073-.145.073-.29.073-.146 0-.219-.073-.364-.145m-.291-2.69c.436-.291.727-.582.945-1.091.218-.51.364-.946.364-1.527a3.4 3.4 0 0 0-.364-1.528c-.218-.436-.582-.8-.945-1.09-.437-.291-.946-.364-1.528-.364a3.4 3.4 0 0 0-1.527.363c-.436.291-.727.582-.945 1.091-.219.51-.364.946-.364 1.528 0 .581.146 1.09.364 1.527s.582.8.945 1.09c.436.292.946.364 1.527.364a3.4 3.4 0 0 0 1.528-.363m15.563 14.618a.56.56 0 0 1-.145-.364c0-.072 0-.145.073-.218l2.763-6.545c.073-.146.146-.218.218-.291a.56.56 0 0 1 .364-.146h.145c.146 0 .291.073.364.146s.218.218.218.29l2.764 6.546c0 .073.073.146.073.218 0 .146-.073.218-.146.364a.56.56 0 0 1-.363.145c-.073 0-.219 0-.291-.072l-.218-.218L36 35h-3.709l-.727 1.672c-.073.073-.073.146-.218.219-.073.072-.146.072-.291.072.073 0-.073 0-.146-.145m1.891-2.764h2.91l-1.455-3.563zM17.819 39.582l.727-2.182zm-4.291-1.091 2.327-2.255zm-1.091-4.218 2.255-.728z"
              ></path>
              <path
                stroke="#EF4444"
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeMiterlimit="10"
                d="m17.819 39.582.727-2.182m-5.018 1.09 2.327-2.254m-3.418-1.963 2.255-.728"
              ></path>
            </svg>
          </div>
          <div className="flex flex-col gap-y-5">
            <span className="text-2xl sm:text-[1.6rem] text-gray-700 dark:text-gray-400">
              پرسش پاسخ های من
            </span>
            <span className="text-2xl sm:text-[1.6rem] text-slate-900 dark:text-white">
              {ticketsCount}
            </span>
          </div>
        </div>

        <div className="flex items-center gap-x-6 w-96 col-span-3">
          <div className="w-24">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 48 48"
            >
              <g fill="#0EA5E9" clipPath="url(#clip0_5149_5579)">
                <path d="M45.712 28.115h-.719v-6.47c0-1.024-.51-1.931-1.288-2.482v-.881a2.32 2.32 0 0 0-2.317-2.318h-.537l2.052-3.011a2.22 2.22 0 0 0-.583-3.078L28.395.385a2.2 2.2 0 0 0-1.66-.346 2.2 2.2 0 0 0-1.418.93L13.3 18.605H9.954l.807-8.168a.24.24 0 0 1 .152-.204 5.2 5.2 0 0 0 2.537-2.06.24.24 0 0 1 .227-.107l5.246.518a.684.684 0 0 0 .135-1.361l-5.246-.519a1.6 1.6 0 0 0-1.516.734 3.82 3.82 0 0 1-1.865 1.515c-.576.217-.97.734-1.031 1.35l-.82 8.302h-.873l1.276-12.92a.85.85 0 0 1 .927-.76l10.6 1.048a.684.684 0 1 0 .135-1.361l-10.6-1.047A2.22 2.22 0 0 0 7.621 5.55L6.593 15.964H4.842a2.32 2.32 0 0 0-2.318 2.318v.6a3.04 3.04 0 0 0-1.773 2.763V44.96A3.043 3.043 0 0 0 3.791 48h38.163a3.043 3.043 0 0 0 3.04-3.04v-6.47h.718a1.54 1.54 0 0 0 1.537-1.538v-7.3a1.54 1.54 0 0 0-1.537-1.537m-4.324-10.783a.95.95 0 0 1 .95.95v.348a3 3 0 0 0-.385-.025h-2.902l.868-1.273zM26.448 1.74a.84.84 0 0 1 .873-.353.8.8 0 0 1 .304.13l13.925 9.489a.85.85 0 0 1 .223 1.177l-4.377 6.423h-1.05l2.146-3.149a1.6 1.6 0 0 0 .074-1.696 3.82 3.82 0 0 1-.458-2.36 1.6 1.6 0 0 0-.692-1.535l-7.218-4.919a1.6 1.6 0 0 0-1.682-.082 3.82 3.82 0 0 1-2.364.436 1.62 1.62 0 0 0-1.55.69l-8.598 12.615h-1.05zm.301 11.615a5.644 5.644 0 0 0-5.623 5.25H17.66L25.731 6.76a.24.24 0 0 1 .231-.105 5.2 5.2 0 0 0 3.215-.594.24.24 0 0 1 .25.016l7.219 4.919c.075.052.117.14.106.227a5.2 5.2 0 0 0 .623 3.209.24.24 0 0 1-.014.254l-2.67 3.919h-2.319a5.644 5.644 0 0 0-5.623-5.251M31 18.605h-8.502a4.275 4.275 0 0 1 4.251-3.883A4.275 4.275 0 0 1 31 18.605m-27.108-.323a.95.95 0 0 1 .95-.95h1.616l-.125 1.273h-2.44zM2.12 21.645c0-.922.75-1.672 1.672-1.672h38.163c.922 0 1.672.75 1.672 1.672v1.898H2.119zM43.626 44.96c0 .922-.75 1.672-1.672 1.672H3.79c-.922 0-1.672-.75-1.672-1.672v-1.898h3.688a.683.683 0 1 0 0-1.368H2.12V24.911h41.507v3.204h-6.504a5.19 5.19 0 0 0-4.666 2.923l-.009.017-.02.045a5 5 0 0 0-.258.662l-.001.002a5.193 5.193 0 0 0 4.954 6.727h6.504v3.203h-33.44a.683.683 0 1 0 0 1.368h33.44zm2.256-8.008a.17.17 0 0 1-.17.17h-8.59a3.823 3.823 0 0 1-3.442-5.474q.04-.083.085-.165c.647-1.19 1.91-2 3.358-2h8.589a.17.17 0 0 1 .17.17z"></path>
                <path d="M37.283 30.527a2.78 2.78 0 0 0-2.775 2.775 2.78 2.78 0 0 0 2.775 2.775 2.78 2.78 0 0 0 2.775-2.775 2.78 2.78 0 0 0-2.775-2.775m0 4.182a1.41 1.41 0 0 1-1.407-1.407c0-.775.63-1.407 1.407-1.407.776 0 1.407.631 1.407 1.407s-.631 1.407-1.407 1.407"></path>
              </g>
              <defs>
                <clipPath id="clip0_5149_5579">
                  <rect width="48" height="48" fill="#fff" rx="4"></rect>
                </clipPath>
              </defs>
            </svg>
          </div>
          <div className="flex flex-col gap-y-5">
            <span className="text-2xl sm:text-[1.6rem] text-gray-700 dark:text-gray-400">
              موجودی کیف پول
            </span>
            <span className="text-2xl sm:text-[1.6rem] text-slate-900 dark:text-white">
              {ticketsCount},542,000&nbsp;
              <span className="slms-price_symbol">تومان</span>
            </span>
          </div>
        </div>
      </div>
    </section>
  );
}
